@model GoogleAuthApp.Models.ShowOffersModel

@{
    ViewBag.Title = "Offers";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <link href="@Url.Content("~/Styles/OwnProfile.css")" rel="stylesheet" type="text/css" />
    <link type="text/css" rel="stylesheet" href="~/Styles/sliderStyle.css" />
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap" rel="stylesheet">
</head>

@section scripts {
    @*add slider Slick*@
    <script src="~/Scripts/slick.min.js"></script>
    @*settings for slider*@
    <script src="~/Scripts/sliderSettings.js"></script>
}

<h2>Offers</h2>
<div class="main-container">

    <div>
        <a class="button" href="@Url.Action("CreateOffer", "Profile")">
            Create Offer
        </a>
    </div>
    <div>
        @foreach (var offer in Model.Offers.OrderByDescending(p => p.Date))
        {
            <hr>
            <div class="postoffername">
                <span>@offer.PostOrOffer</span>
            </div>
                <div class="middle-sub-container">
                    <div class="postoffer-top-container">
                        <div class="details-container">
                            <p>Details:</p>
                            <textarea readonly>@offer.Text</textarea>
                        </div>
                        <div class="date-container">
                            <p>Date:</p>
                            @offer.Date
                        </div>
                        <div class="postoffer-categories-container">
                            <p>Categories:</p>
                            @foreach (var category in offer.Categories)
                            {
                                <p>@category.Group</p>
                            }
                        </div>
                    </div>

                    <div class="slider">
                        @foreach (var picture in offer.OfferPictures)
                        {
                            <div class="slider__item">
                                @Html.Raw("<img src=\"data:image/jpeg;base64,"
                                                       + Convert.ToBase64String(picture.Picture) + "\" />")
                            </div>
                        }
                    </div>
                    <div class="postoffer-low-container">
                        <div>
                            <a href="@Url.Action("AddLikeToOffer", "Profile", new { offerId =offer.Id , backTo = "Offers"} )">
                                <span>Like:</span>
                            </a>
                            @offer.Likes
                        </div>
                        <div>
                            <a href="@Url.Action("ShowProfile", "Profile", new { userId = offer.UserId} )">
                                <span>"@offer.UserId" 's profile</span>
                            </a>
                        </div>
                    </div>
            </div>
        }
    </div>
</div>